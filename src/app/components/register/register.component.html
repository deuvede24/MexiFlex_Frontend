<div class="container mt-3">
    <div class="border p-4 shadow form-custom">
      <form [formGroup]="registerForm" (ngSubmit)="register()">
        <h2 class="text-center mb-4">REGISTRO</h2>
  
        <div class="form-group mb-3">
          <label for="username" class="form-label">Username:</label>
          <input
            type="text"
            formControlName="username"
            id="username"
            class="form-control"
            [ngClass]="{ 'is-invalid': isControlInvalid('username') }"
            required
          />
          <div class="text-danger mt-1">
            @if (isControlInvalid('username')) {
              @if (registerForm.controls['username'].errors?.['required']) {
                <small>Username is required</small>
              }
              @if (registerForm.controls['username'].errors?.['pattern']) {
                <small>Enter a valid username</small>
              }
            }
          </div>
        </div>
  
        <div class="form-group mb-3">
          <label for="email" class="form-label">Email:</label>
          <input
            type="email"
            formControlName="email"
            id="email"
            class="form-control"
            [ngClass]="{ 'is-invalid': isControlInvalid('email') }"
            required
          />
          <div class="text-danger mt-1">
            @if (isControlInvalid('email')) {
              @if (registerForm.controls['email'].errors?.['required']) {
                <small>Email is required</small>
              }
              @if (registerForm.controls['email'].errors?.['email']) {
                <small>Enter a valid email</small>
              }
            }
          </div>
        </div>
  
        <div class="form-group mb-3">
          <div class="password-field">
            <input 
              [type]="showPassword ? 'text' : 'password'"
              formControlName="password"
              class="form-control"
              [ngClass]="{ 'is-invalid': isControlInvalid('password') }"
              placeholder="Contrase単a">
            <i 
              class="fas" 
              [class.fa-eye]="!showPassword" 
              [class.fa-eye-slash]="showPassword"
              (click)="togglePasswordVisibility()"
            ></i>
            @if (isControlInvalid('password')) {
              <div class="invalid-feedback">La contrase単a debe tener al menos 6 caracteres</div>
            }
          </div>
        </div>
  
        <div class="form-group mb-3">
          <div class="password-field">
            <input 
              [type]="showConfirmPassword ? 'text' : 'password'"
              formControlName="confirmPassword"
              class="form-control"
              [ngClass]="{ 'is-invalid': isControlInvalid('confirmPassword') }"
              placeholder="Confirmar contrase単a">
            <i 
              class="fas" 
              [class.fa-eye]="!showConfirmPassword" 
              [class.fa-eye-slash]="showConfirmPassword"
              (click)="toggleConfirmPasswordVisibility()"
            ></i>
            @if (isControlInvalid('confirmPassword')) {
              <div class="invalid-feedback">Las contrase単as no coinciden</div>
            }
          </div>
        </div>
  
        <button type="submit" class="btn w-100">Register</button>
        @if (errorMessage) {
          <div class="text-danger mt-2">
            {{ errorMessage }}
          </div>
        }
      </form>
    </div>
  </div>
  